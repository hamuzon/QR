<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Minecraft-QR-Generator</title>
<meta name="description" content="Minecraft„ÅÆQRÂª∫ÁØâ„Å´ÊúÄÈÅ©„Å™QR„Ç≥„Éº„Éâ„ÇíÁîüÊàê„Åó„Åæ„Åô„ÄÇÈªí„Å®ÁôΩ„ÅÆ„Ç≥„É≥„ÇØ„É™„Éº„Éà„Åß„Éû„Ç§„ÇØ„É©È¢®„Å´Ë°®Áèæ„ÄÇ">
<meta name="keywords" content="Minecraft, QR„Ç≥„Éº„Éâ, QR, „Ç≥„É≥„ÇØ„É™„Éº„Éà, „Éû„Ç§„ÇØ„É©, Âª∫ÁØâ, QR generator, MC QR">
<meta name="robots" content="index, follow">
<style>
body {
  margin:0;
  font-family:sans-serif;
  background: linear-gradient(#80c71f 0 50%, #9c7a5c 50% 100%);
  background-size: 32px 32px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  min-height:100vh;
  color:#fff;
  padding:1rem;
}
main {
  width:100%;
  max-width:600px;
  text-align:center;
  background: rgba(0,0,0,0.5);
  padding:1rem;
  border-radius:1rem;
  box-sizing:border-box;
}
input {
  width:100%;
  padding:0.6rem;
  margin-bottom:0.6rem;
  font-size:1rem;
  border-radius:0.5rem;
  border:none;
  box-sizing:border-box;
}
button {
  flex:1;
  padding:0.6rem 1rem;
  margin:0.2rem;
  border:none;
  border-radius:0.5rem;
  background:#3399ff;
  color:#fff;
  cursor:pointer;
  min-width:100px;
}
button:hover{background:#1673e6;}
#buttonGroup {
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  margin-bottom:0.5rem;
}
#blockqr {
  margin-top:1rem;
  max-width:100%;
  image-rendering: pixelated;
  border:2px solid #555;
}
.guide {
  font-size:0.8rem;
  color:#fff;
  margin-top:0.5rem;
}
@media(max-width:480px){
  #buttonGroup{
    flex-direction:column;
  }
  button{
    width:100%;
  }
}
</style>
</head>
<body>
<main>
  <h1>Minecraft-QR-Generator</h1>
  <input type="text" id="inputText" placeholder="URL or Text">
  <div id="buttonGroup">
    <button onclick="generateMCQR()">Generate QR</button>
    <button onclick="downloadMCQR()">Download PNG</button>
  </div>
  <canvas id="blockqr"></canvas>
  <div class="guide">
    <p>üìå Minecraft Âª∫ÁØâ„Ç¨„Ç§„Éâ</p>
    <p>Èªí = Èªí„Ç≥„É≥„ÇØ„É™„Éº„Éà, ÁôΩ = ÁôΩ„Ç≥„É≥„ÇØ„É™„Éº„Éà</p>
    <p>1„Çª„É´ = 1„Éñ„É≠„ÉÉ„ÇØ„Å®„Åó„Å¶Âª∫ÁØâ</p>
  </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>
<script>
let lastText="";

async function generateMCQR(){
  const text=document.getElementById("inputText").value.trim();
  if(!text){alert("‚ö†Ô∏è Input is empty"); return;}
  lastText=text;

  const tempCanvas=document.createElement("canvas");
  await QRCode.toCanvas(tempCanvas,text,{width:64,margin:1});
  const ctxTemp=tempCanvas.getContext("2d");
  const imgData=ctxTemp.getImageData(0,0,tempCanvas.width,tempCanvas.height).data;

  const blockCanvas=document.getElementById("blockqr");
  const cellSize=Math.floor(Math.min(blockCanvas.parentElement.clientWidth*0.95/tempCanvas.width,32));
  blockCanvas.width=tempCanvas.width*cellSize;
  blockCanvas.height=tempCanvas.height*cellSize;
  const ctx=blockCanvas.getContext("2d");

  const mcBlack="#1D1D21";
  const mcWhite="#F9FFFE";

  for(let y=0;y<tempCanvas.height;y++){
    for(let x=0;x<tempCanvas.width;x++){
      const i=(y*tempCanvas.width+x)*4;
      const r=imgData[i],g=imgData[i+1],b=imgData[i+2];
      const brightness=(r+g+b)/3;
      ctx.fillStyle=brightness<128?mcBlack:mcWhite;
      ctx.fillRect(x*cellSize,y*cellSize,cellSize,cellSize);
    }
  }
}

function downloadMCQR(){
  const canvas=document.getElementById("blockqr");
  if(!canvas.width){alert("QR„Ç≥„Éº„Éâ„ÇíÁîüÊàê„Åó„Å¶„Åè„Å†„Åï„ÅÑ"); return;}
  const link=document.createElement("a");
  link.download="Minecraft-QR.png";
  link.href=canvas.toDataURL("image/png");
  link.click();
}

// ÁîªÈù¢„Çµ„Ç§„Ç∫Â§âÊõ¥ÊôÇ„Å´„É™„Çµ„Ç§„Ç∫
window.addEventListener('resize',()=>{
  if(lastText){
    generateMCQR();
  }
});
</script>
</body>
</html>